// src/pages/Results.jsx
import React from "react";
import './Results.css';
import './NNQC.css';
import RefinementResults from "../components/RefinementResults";
import PromptRefinementChart from "../components/PromptRefinementChart";
import QualityControlAccuracyChart from "../components/QualityControlAccuracyChart";

export default function Results() {
  return (
    <>
      {/* ========== HERO TITLE ========== */}
      <header className="results-hero-title">
        <h1>Results:</h1>
        <h2><span className="accent">R</span>efining <span className="accent">S</span>egmentation, <span className="accent">R</span>edefining <span className="accent">A</span>ccuracy</h2>
        <p>See how HERMES outperforms traditional post-processing methods and significantly boosts segmentation quality through intelligent prompt refinement.</p>
      </header>

      {/* ==========  What to know to understand the results? ========== */}
      <div className="section-block">
        <div className="section-header">
          <h2>What to know to understand the results?</h2>
        </div>
        <div className="results-section">
            {/* ========== FOUNDATION MODELS ========== */}
            <div className="section-block-inside">
              <div className="section-header">
                <h2>Foundation Models</h2>
              </div>
              <div className="results-section">
                {/* Intro */}
                <p style={{margin:'0'}}>HERMES was tested on three different prompt-based segmentation models:</p>

                {/* 1) MedSAM */}
                <div className="results-row">
                  <div className="results-text">
                    <ul>
                      <li>
                        <strong>MedSAM:</strong> A powerful general-purpose segmentation model
                        that uses bounding box prompts to localize structures.
                      </li>
                    </ul>
                  </div>
                  <div className="results-image">
                    <img src="/results/box.png" alt="MedSAM bounding box example" />
                  </div>
                </div>

                {/* 2) ScribblePrompt */}
                <div className="results-row">
                  <div className="results-text">
                    <ul>
                      <li>
                        <strong>ScribblePrompt:</strong> A model guided by scribbled lines drawn
                        roughly over the target organ.
                      </li>
                    </ul>
                  </div>
                  <div className="results-image">
                    <img src="/results/scribble.png" alt="ScribblePrompt example" />
                  </div>
                </div>

                {/* 3) MIDeepSeg */}
                <div className="results-row">
                  <div className="results-text">
                    <ul>
                      <li>
                        <strong>MIDeepSeg:</strong> A point-click interface where the user gives
                        positive and negative clicks to indicate the region of interest.
                      </li>
                    </ul>
                  </div>
                  <div className="results-image">
                    <img src="/results/points.png" alt="MIDeepSeg point-click example" />
                  </div>
                </div>

                {/* Outro */}
                <p>
                  Each model represents a different way of interacting with segmentation
                  models, and all require a prompt to start.
                </p>
              </div>
            </div>
            {/* ========== PDSC THRESHOLDS ========== */}
            <div className="section-block-inside">
              <div className="section-header">
                <h2>pDSC Thresholds</h2>
              </div>
              <div className="results-section">
                <p>
                  <strong>pDSC</strong> (predicted Dice Similarity Coefficient) is a quality score estimated 
                  without access to the real ground truth.
                </p>
                <p>
                  It compares the predicted segmentation with a pseudo-ground truth generated by nnQC, 
                  a realistic approximation of the correct shape.
                </p>
                <p>
                  This allows HERMES to decide whether a segmentation is good enough to keep or needs to be refined.
                </p>

                <p>We evaluate performance at different pDSC thresholds:</p>
                <ul style={{margin:'0 5%'}}>
                  <li><strong>70:</strong> acceptable</li>
                  <li><strong>80:</strong> good</li>
                  <li><strong>90:</strong> excellent</li>
                </ul>

                <p>
                  The higher the threshold reached, the better the segmentation and the stronger the impact of HERMES.
                </p>
              </div>

            </div>
        </div>
      </div>


      {/* ========== QUANTITATIVE PERFORMANCE ========== */}
      <div className="section-block">
        <div className="section-header">
          <h2>Quantitative Performance</h2>
        </div>
        <div className="results-section">
          <RefinementResults />
        </div>
      </div>

      {/* ========== HOW HERMES REFINES ========== */}
      <div className="section-block">
        <div className="section-header">
          <h2>How HERMES Refines Over Iterations</h2>
        </div>
        <div className="results-section">
          <PromptRefinementChart/>
        </div>
      </div>

      {/* ========== QUALITATIVE VISUAL RESULTS ========== */}
      <div className="section-block">
        <div className="section-header">
          <h2>Qualitative Visual Results</h2>
        </div>
        <div className="results-section">
          <div className="results-row">
            <p>Starting from a failed prediction, only HERMES successfully recovers a valid segmentation by generating a refined pseudo-ground truth and updating the prompt.Other methods (PostDAE, cVAE) produce incomplete or incorrect results. HERMES turns poor inputs into accurate masks, where others fail.</p>
            <img src='/results/initial_stage.png'/>
          </div>
          <div className="three-images-res">
            <div className="fingerprints-box-res">
              <div className="section-header"><h4>PostDAE</h4></div>
              <div className="res-section">
                <img src='/results/PostDAE.png' />
              </div>
            </div>
            <div className="fingerprints-box-res">
              <div className="section-header"><h4>cVAE</h4></div>
              <div className="res-section">
                <img src='/results/cVAE.png' />
              </div>
            </div>
            <div className="fingerprints-box-res">
              <div className="section-header"><h4>HERMES</h4></div>
              <div className="res-section">
                <img src='/results/HERMES.png' />
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* ========== QC COMPARISON ========== */}
      <div className="section-block">
        <div className="section-header">
          <h2>QC Comparison</h2>
        </div>
        <div className="results-section">
          <QualityControlAccuracyChart/>
        </div>
      </div>
    </>
  );
}
